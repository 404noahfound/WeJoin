extends layout
block append scripts
  script(src="/javascripts/mixin.js")

mixin ListActivities(activities)
    div(class="ui relaxed divided items")
        each activity, i in activities
            div(class="item")
                div(class="ui small image")
                    img(src=activity.picture.replace('static', ''))
                div(class="content")
                    a(class="ui header") #{activity.title}
                    div(class="meta")
                        +user_label(activity.organizer_info)
                        //- div(class="ui card")
                        //-     div(class="content")
                        //-       img(class="right floated mini ui image" src=activity.organizer_info.avatar.replace('static',''))
                        //-       div(class="header") #{activity.organizer_info.nickname} (#{activity.organizer_info.username})
                        //-       div(class="meta") Organizer
                        br
                        br
                        a(style="margin-top: 20px") Time: #{activity.start_time}
                        br
                        a Location: #{activity.location_name}
                        br
                    div(class="description") #{activity.description}
                    div(class="extra")
                        if activity.status == "future"
                            div(class="ui purple label") #{activity.status}
                        else if activity.status == "going"
                            div(class="ui green label") #{activity.status}
                        else if activity.status == "finished"
                            div(class="ui yellow label") #{activity.status}
                        else if activity.status == "cancelled"
                            div(class="ui label") #{activity.status}
                        div(class="ui label", style="margin: 0px 15px") #{activity.participation_method}
                        if activity.expense == 0
                            div(class="ui green tag label", style="margin: 0px 15px") #{activity.expense}
                        else    
                            div(class="ui red tag label", style="margin: 0px 15px") #{activity.expense}
                        a(href="/activity/#{activity._id}")
                            div(class="ui right floated primary button") View Detail
                                i(class="right chevron icon")
//- user{avatar: String, nickname: String}
mixin user_label(user)
  div.ui.image.label
    img(src=user.avatar.replace('static', ''))
    | &nbsp&nbsp&nbsp#{user.nickname}

mixin user_card(user)
  div.ui.card
    div.image
     img(src=user.avatar)
    div.content
      div.header #{user.nickname}

//- followee{_id: String}
mixin follow(followee)
  div(class="ui tiny follow button", followee = followee._id)
    div.unfollowed
      i.plus.icon
      |follow
    div.followed
      |Followed